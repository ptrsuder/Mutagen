
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mutagen-modding.github.io/Mutagen/plugins/Binary-Format-Complexity-Abstraction/">
      
      
        <link rel="prev" href="../AssetLink/">
      
      
        <link rel="next" href="../Create%2C-Duplicate%2C-and-Override/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Binary Format Complexity Abstraction - Mutagen Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../Custom/Stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#binary-format-complexity-abstraction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Mutagen Documentation" class="md-header__button md-logo" aria-label="Mutagen Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mutagen Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Binary Format Complexity Abstraction
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Mutagen-Modding/Mutagen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Mutagen-Modding/Mutagen
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Mutagen Documentation" class="md-nav__button md-logo" aria-label="Mutagen Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Mutagen Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Mutagen-Modding/Mutagen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Mutagen-Modding/Mutagen
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../top/Big-Cheat-Sheet/" class="md-nav__link">
        Big Cheat Sheet
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Plugin Record Suite</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Plugin Record Suite" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Plugin Record Suite
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ModKey%2C-FormKey%2C-FormLink/" class="md-nav__link">
        ModKey, FormKey, FormLink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Generated-Classes/" class="md-nav__link">
        Generated Classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Binary-Importing/" class="md-nav__link">
        Binary Importing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Binary-Overlay/" class="md-nav__link">
        Binary Overlay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Interfaces-%28Aspect-Link-Getters%29/" class="md-nav__link">
        Interfaces (Aspect/Link/Getters)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Copy-Functionality/" class="md-nav__link">
        Copy Functionality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Binary-Exporting/" class="md-nav__link">
        Binary Exporting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Equality-Checks/" class="md-nav__link">
        Equality Checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Translation-Masks/" class="md-nav__link">
        Translation Masks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Flags-and-Enums/" class="md-nav__link">
        Flags and Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AssetLink/" class="md-nav__link">
        Asset Links
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Binary Format Complexity Abstraction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Binary Format Complexity Abstraction
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#formkeys-and-formlinks" class="md-nav__link">
    FormKeys and FormLinks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#record-types" class="md-nav__link">
    Record Types
  </a>
  
    <nav class="md-nav" aria-label="Record Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#four-character-headers" class="md-nav__link">
    Four Character Headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternate-headers" class="md-nav__link">
    Alternate Headers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-mechanics" class="md-nav__link">
    List Mechanics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#item-storage" class="md-nav__link">
    Item Storage
  </a>
  
    <nav class="md-nav" aria-label="Item Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#count-subrecords" class="md-nav__link">
    Count Subrecords
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#globalgamesetting-types" class="md-nav__link">
    Global/Gamesetting types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#markers" class="md-nav__link">
    Markers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pathgrid-point-zipping" class="md-nav__link">
    PathGrid Point Zipping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-flag-consolidation" class="md-nav__link">
    Multiple Flag Consolidation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gendereditem" class="md-nav__link">
    GenderedItem
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pseudo-enum-dictionaries" class="md-nav__link">
    Pseudo Enum Dictionaries
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Create%2C-Duplicate%2C-and-Override/" class="md-nav__link">
        Create, Duplicate, and Override
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Abstract-Subclassing/" class="md-nav__link">
        Abstract Subclassing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Printing/" class="md-nav__link">
        Printing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Typical-Mod-Construction-and-Importing/" class="md-nav__link">
        Typical Mod Construction and Importing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../FormKey-Allocation-and-Persistence.md" class="md-nav__link">
        FormKey Allocation and Persistence
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../environment/">Environment</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Environment" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/Environment-Construction/" class="md-nav__link">
        Environment Construction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/Game-Locations/" class="md-nav__link">
        Game Locations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../linkcache/">Link Cache</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Link Cache" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Link Cache
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linkcache/Record-Lookup/" class="md-nav__link">
        Record Lookup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linkcache/ModContexts/" class="md-nav__link">
        Mod Contexts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linkcache/Previous-Override-Iteration/" class="md-nav__link">
        Previous Override Iteration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../loadorder/">Load Order</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Load Order" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Load Order
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../loadorder/Winning-Overrides/" class="md-nav__link">
        Winning Override Iteration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../top/Archives/" class="md-nav__link">
        Archives (BSAs)
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8" tabindex="0" aria-expanded="false">
          Strings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Strings" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Strings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../strings/Translated-Strings/" class="md-nav__link">
        Translated Strings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9" tabindex="0" aria-expanded="false">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/Print-Some-Content/" class="md-nav__link">
        Print Some Content
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/Low-Level-Examples/" class="md-nav__link">
        Low Level Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10" tabindex="0" aria-expanded="false">
          Getting Familiar with C#
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Familiar with C#" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Getting Familiar with C#
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../familiar/Namespaces/" class="md-nav__link">
        Namespaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../familiar/Nullability-to-Indicate-Record-Presence/" class="md-nav__link">
        Nullability to Indicate Record Presence
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_11" tabindex="0" aria-expanded="false">
          Best Practices and Optimizations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Best Practices and Optimizations" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Best Practices and Optimizations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/Getters-Everywhere/" class="md-nav__link">
        Getters Everywhere
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/Accessing-Known-Records/" class="md-nav__link">
        Accessing Known Records
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/FormLinks-Always-Target-Getter-Interfaces/" class="md-nav__link">
        FormLinks Always Target Getter Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/FormLinks-vs-EditorID-as-Identifiers/" class="md-nav__link">
        FormLinks vs EditorID as Identifiers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/FormLink-vs-FormLinkNullable/" class="md-nav__link">
        FormLink vs FormLinkNullable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/Enumerable-Laziness/" class="md-nav__link">
        Enumerable Laziness
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/TryGet-Concepts/" class="md-nav__link">
        TryGet Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/ITPO-Avoidance/" class="md-nav__link">
        ITPO Avoidance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/Reuse-Translation-Masks/" class="md-nav__link">
        Reuse Translation Masks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../best-practices/Modifying-Groups-Being-Iterated/" class="md-nav__link">
        Modifying Groups Being Iterated
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../wpf/">WPF Library</a>
          
            <label for="__nav_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="WPF Library" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          WPF Library
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wpf/FormKey-Picker/" class="md-nav__link">
        FormKey Picker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wpf/ModKey-Picker/" class="md-nav__link">
        ModKey Picker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wpf/Reflection-Powered-Settings/" class="md-nav__link">
        Reflection Powered Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../wpf/Adding-Required-Resources/" class="md-nav__link">
        Adding Required Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../FormKey-Allocation-and-Persistence.md" class="md-nav__link">
        FormKey Allocation/Persistence
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../top/Json/" class="md-nav__link">
        Json
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../..">Low Level Tools</a>
          
            <label for="__nav_15">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Low Level Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          Low Level Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lowlevel/C%23-Span/" class="md-nav__link">
        C# Span
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lowlevel/Header-Structs/" class="md-nav__link">
        Header Structs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lowlevel/Game-Constants/" class="md-nav__link">
        Game Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lowlevel/Binary-Streams/" class="md-nav__link">
        Binary Streams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lowlevel/Binary-Utility/" class="md-nav__link">
        Binary Utility
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_16" tabindex="0" aria-expanded="false">
          Game Specific Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Game Specific Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Game Specific Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_16_1" type="checkbox" id="__nav_16_1" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_16_1" tabindex="0" aria-expanded="false">
          Oblivion
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Oblivion" data-md-level="2">
        <label class="md-nav__title" for="__nav_16_1">
          <span class="md-nav__icon md-icon"></span>
          Oblivion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game-specific/oblivion/Oblivion-Aspect-Interfaces/" class="md-nav__link">
        Oblivion Aspect Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game-specific/oblivion/Oblivion-Link-Interfaces/" class="md-nav__link">
        Oblivion Link Interfaces
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_16_2" type="checkbox" id="__nav_16_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_16_2" tabindex="0" aria-expanded="false">
          Skyrim
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Skyrim" data-md-level="2">
        <label class="md-nav__title" for="__nav_16_2">
          <span class="md-nav__icon md-icon"></span>
          Skyrim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game-specific/skyrim/Skyrim-Perks/" class="md-nav__link">
        Skyrim Perks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game-specific/skyrim/Skyrim-Aspect-Interfaces/" class="md-nav__link">
        Skyrim Aspect Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../game-specific/skyrim/Skyrim-Link-Interfaces/" class="md-nav__link">
        Skyrim Link Interfaces
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../top/Correctness/" class="md-nav__link">
        Correctness
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#formkeys-and-formlinks" class="md-nav__link">
    FormKeys and FormLinks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#record-types" class="md-nav__link">
    Record Types
  </a>
  
    <nav class="md-nav" aria-label="Record Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#four-character-headers" class="md-nav__link">
    Four Character Headers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternate-headers" class="md-nav__link">
    Alternate Headers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-mechanics" class="md-nav__link">
    List Mechanics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#item-storage" class="md-nav__link">
    Item Storage
  </a>
  
    <nav class="md-nav" aria-label="Item Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#count-subrecords" class="md-nav__link">
    Count Subrecords
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#globalgamesetting-types" class="md-nav__link">
    Global/Gamesetting types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#markers" class="md-nav__link">
    Markers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pathgrid-point-zipping" class="md-nav__link">
    PathGrid Point Zipping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-flag-consolidation" class="md-nav__link">
    Multiple Flag Consolidation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gendereditem" class="md-nav__link">
    GenderedItem
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pseudo-enum-dictionaries" class="md-nav__link">
    Pseudo Enum Dictionaries
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="binary-format-complexity-abstraction">Binary Format Complexity Abstraction</h1>
<p>Bethesda's binary format contains a lot implementation complexities that are unrelated to the actual content of the records.  A lot of times the exposure of these details are a source of confusion, and don't add much upside in the way of flexibility or power into the hands of the user.  Mutagen attempts to abstract these complexities away so that the end user is dealing with the distilled record content more directly, rather than wading through the gritty specifics that only matter in the context of their binary format on disk.</p>
<h2 id="formkeys-and-formlinks">FormKeys and FormLinks</h2>
<p>This topic was covered in detail in the <a href="../ModKey%2C-FormKey%2C-FormLink/#formkeys">ModKey, FormKey, FormLink</a> section, and so will not be covered here.</p>
<h2 id="record-types">Record Types</h2>
<h3 id="four-character-headers">Four Character Headers</h3>
<p>Most seasoned modders are familiar with the 4 character record headers. <code>EDID</code> is <code>Editor ID</code>.  <code>FULL</code> is <code>Name</code>.  <code>MODL</code> is <code>Model</code>.  </p>
<p>Most of these concepts are unnecessary in Mutagen.  Any member is exposed via its readable name: <code>npc.EditorID</code>, <code>npc.Name</code>, and <code>npc.Model</code>.  As such, there is no possibility of typos or misqueries, no need to remember the more obscure header strings, and no possibility of type mishandling.  Any typo or attempt to access a non-existent member will be caught by the compiler, instead of a failed string query at runtime.</p>
<h3 id="alternate-headers">Alternate Headers</h3>
<p>Additionally, some common Record Types have alternate versions to denote different fields.  A common example of this is the <code>Model</code> Record Type <code>MODL</code>.</p>
<p>(finish writing)</p>
<h2 id="list-mechanics">List Mechanics</h2>
<h2 id="item-storage">Item Storage</h2>
<p>There are a lot of varying ways that lists are stored in the binary format:
- Repeated subrecords, with their Record Header as the delimiter.  Unknown amount.
  <em>(SPLO records in Oblivion)</em>
- Extra prepended subrecord /w the count of items in the list.  This can then be followed by repeated subrecords with Record Headers, or headerless raw data of known lengths.
  <em>(Keyword lists in Skyrim)</em>
- A Record Header for the list itself, followed immediately by a uint count, followed by undelimited content of known length. <em>(Skyrim Model's Alternate Textures)</em>
- Probably others</p>
<p>No matter what pattern is used for a specific set of records, they are all exposed via straight up lists in the API:
<div class="highlight"><pre><span></span><code>// Oblivion spells
IList&lt;FormLink&lt;Spell&gt;&gt; Spells { get; set; }

// A keyword list
IList&lt;FormLink&lt;Keyword&gt;&gt; Keywords { get; set; }

// A model&#39;s alternate textures
IList&lt;AlternateTexture&gt; AlternateTextures { get; set; }
</code></pre></div></p>
<h3 id="count-subrecords">Count Subrecords</h3>
<p>(finish writing)</p>
<h2 id="globalgamesetting-types">Global/Gamesetting types</h2>
<p>The Global and Gamesetting records contain many different types of data while each having their own unique rules of communicating what type of data they contain.  For example, <code>Global</code> records have a special subrecord <code>FNAM</code> with a single char <code>i</code>, <code>f</code>, <code>s</code> to symbolize the float field it contains should be interpreted as an <code>int</code>, <code>float</code>, or <code>short</code>.  <code>GameSetting</code> on the other hand prepends a character to its EditorID to communicate what type of data is stored in its <code>DATA</code> subrecord.</p>
<p>This complexity is abstracted away by Mutagen by offering strongly typed subclasses for Globals and Gamesettings.  <code>GlobalInt</code>, <code>GlobalFloat</code>, <code>GameSettingInt</code>, <code>GameSettingString</code>, <code>GameSettingBool</code>, etc.  These subclasses expose a strongly typed member of the correct type to the user while internally handling the most of the details.</p>
<p>Creating a new Global/Gamesetting might look like:
<div class="highlight"><pre><span></span><code><span class="n">mod</span><span class="p">.</span><span class="n">Globals</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">GlobalInt</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">GetNextFormKey</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">EditorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;AnIntGlobal&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1234</span>
<span class="w">    </span><span class="p">});</span>
<span class="n">mod</span><span class="p">.</span><span class="n">Globals</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">GlobalFloat</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">GetNextFormKey</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">EditorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;AFloatGlobal&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1234.5</span>
<span class="w">    </span><span class="p">});</span>
<span class="n">mod</span><span class="p">.</span><span class="n">GameSettings</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">GameSettingString</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">GetNextFormKey</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">EditorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;AStringGameSetting&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;HelloWorld&quot;</span>
<span class="w">    </span><span class="p">});</span>
<span class="n">mod</span><span class="p">.</span><span class="n">GameSettings</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">GameSettingFloat</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">GetNextFormKey</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">EditorID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;AFloatGameSetting&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1234.5</span>
<span class="w">    </span><span class="p">});</span>
</code></pre></div></p>
<p>Note: For GameSettings, the EditorID stores the type data as its first character.  Any EditorID you set will automatically be processed to have the correct starting character.  As such, all GameSettings should have their EditorIDs set.</p>
<p>Reading Globals/GameSettings consists of checking/casting the records to their correct subtype.  One easy way to do this is to use a switch:
<div class="highlight"><pre><span></span><code><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">GameSetting</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">mod</span><span class="p">.</span><span class="n">GameSettings</span><span class="p">.</span><span class="n">Records</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">setting</span><span class="p">)</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">       </span><span class="k">case</span><span class="w"> </span><span class="n">GameSettingString</span><span class="w"> </span><span class="n">stringSetting</span><span class="p">:</span>
<span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Found a string setting: {stringSetting.EditorID}&quot;</span><span class="p">);</span>
<span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;   Value: {stringSetting.Data}&quot;</span><span class="p">);</span>
<span class="w">           </span><span class="k">break</span><span class="p">;</span>
<span class="w">       </span><span class="k">case</span><span class="w"> </span><span class="n">GameSettingBool</span><span class="w"> </span><span class="n">boolSetting</span><span class="p">:</span>
<span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Found a bool setting: {stringSetting.EditorID}&quot;</span><span class="p">);</span>
<span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;   Value: {(stringSetting.Data ? &quot;</span><span class="n">ON</span><span class="o">!</span><span class="s">&quot; : &quot;</span><span class="n">OFF</span><span class="o">!</span><span class="s">&quot;)}&quot;</span><span class="p">);</span>
<span class="w">           </span><span class="k">break</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="markers">Markers</h2>
<p>Some subrecords have specialized "marker" subrecords that precede them.  Sometimes they just mark the location of a section of subrecords, while other times they affect the context of the following subrecords.</p>
<p>A good specific example can be found in Skyrim's <code>Race</code>'s Body Data subrecords.  A <code>Race</code> has a body data struct for males, and a body data struct for females.  These records are first "marked" by an empty <code>NAM0</code> record.  They are then further "marked" by empty <code>MNAM</code> or <code>FNAM</code> subrecords, to indicate if the following data is for males or females.  The binary might follow this pattern:
<div class="highlight"><pre><span></span><code>NAM0: No content, just a marker
MNAM: No content, just a marker
INDX: Body Data content for males
MODL: Body Data content for males
FNAM: No content, just a marker
INDX: Body Data content for females
MODL: Body Data content for females
</code></pre></div></p>
<p>Mutagen abstracts the concepts of markers away from the user completely.  No concepts of markers exist in the API exposed.  A user can just directly access the data they're interested in, and if a marker-related field is set for exporting, the marker systems will be handled automatically during export internally.</p>
<h2 id="pathgrid-point-zipping">PathGrid Point Zipping</h2>
<p>Path grid information in records such as Oblivion's <code>Road</code> are stored in two separate subrecord lists that need to be considered together in order to get the complete structure.  The points themselves are stored in the list <code>PGRP</code>, while the information about the connections between points is stored in <code>PGRR</code>.  If you want to know what points have what connections, you need to offset your queries into the <code>PGRR</code> subrecord properly.  Each Point exposes the number of connections it has.  Then, to find the connections for Point #7, you have to offset your query into <code>PGRR</code> by 12 * the number of connections Points #1-6 had.  You then have to extract the number of connection floats appropriate for Point #7, based on the number of connections it says it has.</p>
<p>Mutagen abstracts this "zipping" work for you and offers a simple <code>IList&lt;RoadPoint&gt; Points;</code> member on <code>Road</code>.  Each <code>RoadPoint</code> has a <code>IList&lt;P3Float&gt; Connections;</code> with all the connections related to that point.  All the complexity of the dual subrecords is hidden from the user, and they can just manipulate these lists directly in a more straightforward and familiar fashion.</p>
<h2 id="multiple-flag-consolidation">Multiple Flag Consolidation</h2>
<p>Some records have so many flags that they overflow above the typical 4 bytes.  Bethesda will then put a second set of flags elsewhere in the record with the overflow flag values.  One example of this happening is in Skyrim's Race record.  Mutagen merges the overflow into one Flag field exposing all of the values in one place.</p>
<h2 id="gendereditem">GenderedItem</h2>
<p>Bethesda records have a lot of fields that come in a Male/Female pair.  While not too much of a problem by itself, most of the complexity comes in the variety of ways that these pairs can be organized.  Sometimes the M/F data is held in dedicated <code>MNAM</code>/<code>FNAM</code> records.  Sometimes those records are prepended by a marker, as mentioned above.  Sometimes instead both are found in a single subrecord, with the data just back to back.</p>
<p>Mutagen standardizes all the various cases, and exposes the male/female alternatives using a <code>GenderedItem</code> struct in the public API:
<div class="highlight"><pre><span></span><code>public class GenderedItem&lt;T&gt;
{
    public T Male { get; set; }
    public T Female { get; set; }
}

...

// Using Oblivion&#39;s Race&#39;s Height as an example
race.Height.Male = 1.5f;
float femaleHeight = race.Height.Female;
</code></pre></div></p>
<h2 id="pseudo-enum-dictionaries">Pseudo Enum Dictionaries</h2>
<p>Skyrim's Race record has a hacky binary implementation for its <code>Biped Object Names</code> field.</p>
<p>This field is supposed to expose the names associated with the different values of this enum:
<div class="highlight"><pre><span></span><code>[Flags]
public enum BipedObjectFlag : uint
{
    Head = 0x0000_0001,
    Hair = 0x0000_0002,
    Body = 0x0000_0004,
    ...
    Ears = 0x0000_2000,
    DecapitateHead = 0x0010_0000,
    Decapitate = 0x0020_0000,
    FX01 = 0x8000_0000,
}
</code></pre></div></p>
<p>With this field, a user can specify different string names for the Head slot, the Hair slot, etc.  Oddly, though, this is all stored as a list, where the 3rd item would be associated with the <code>Body</code>, for example.  Additionally, to get out to the later enum values, empty list items must be inserted for each unknown flag index.</p>
<div class="highlight"><pre><span></span><code>// Example binary structure
NAME - &quot;Top Thing&quot;  // Head index
NAME - &quot;Inedible Spaghetti&quot; // Hair index
NAME - &quot;Gut Housing&quot; // Body index
...
NAME - &quot;Future Wings&quot; // Ear index
NAME - empty // Empty index for 0x0000_4000
NAME - empty // Empty index for 0x0000_8000
...
NAME - empty // Empty index for 0x0008_0000
NAME - &quot;Decapitate Head&quot; // Decapitate Head index
</code></pre></div>
<p>Notice that the user needs to coordinate/know that the third index is the body index.  They also need to make sure to insert/count the proper empty indices in order to "reach" the later flags.  If any item is inserted/removed, all the surrounding items are now misaligned, etc.</p>
<p>Mutagen wraps these List concepts internally, and exposes <code>Dictionary&lt;BipedObjectFlag, string&gt;</code> in its public API instead.  The user can get/set the dictionary in a more natural way, and the error prone list implementation will be handled for them under the hood.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/Mutagen-Modding" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>